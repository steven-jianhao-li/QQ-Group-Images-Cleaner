# QQ群聊图像清理器
一款拥有图形界面的腾讯QQ图片缓存清理工具，用于彻底扫描和清理由QQ群聊产生的大量被动存储且海量的缓存图片（存放于路径`Documents\Tencent Files\<QQ号>\Image\Group2`），帮助您回收数GB的磁盘空间。



![qq_cleaner使用示意](assets/qq_cleaner使用示意.gif)



## ⚠️ 免责声明
**数据无价，操作需谨慎！**

本程序旨在提供一套自动清理图片缓存的可行学习方案。

但是，文件删除是不可逆操作。

**请在完全理解本工具的功能后，再执行删除操作。**

**对于因使用本程序而导致的任何数据丢失或损坏，作者概不负责。**

**强烈建议在执行大规模删除前，备份重要数据。**

## 📖 程序功能
### 核心目标
本工具的核心目标是解决QQ桌面端因长期使用而导致的群聊图片缓存文件过度占用磁盘空间的问题。

本工具会扫描您指定的QQ用户数据文件夹（默认路径为：`Documents\Tencent Files\<QQ号>\Image\Group2），分析所有图片文件，并允许您根据时间线安全、批量地进行清理。

而本工具相对的是QQ自带的清理工具，但是利用QQ自带的清理工具无法有效扫描或清理群聊图片。弊端至少有：扫描速度慢、扫描结果不全、删除文件失败等。

![QQ自带的扫描工具](assets/QQ自带的扫描工具.png)

### 主要功能
图形用户界面 (GUI): 提供直观易用的操作界面，无需复杂的命令行操作。

精准时间分析: 综合文件的创建时间、修改时间、访问时间，取最早的一个作为文件的“真实时间”，分析更准确。

删除前预览: 在确认删除前，会弹出一个窗口，随机展示部分待删除图片的缩略图，让您对要删除的内容有直观的了解，防止误删。

中英双语支持: 内置中文和英文两种语言，可随时切换。

响应式设计: 扫描和删除等耗时操作均在后台线程执行，确保了操作过程中界面的流畅不卡顿。

## 🧩 解决的难题
> 参考与启发: [【科普向】QQ凭什么占据几十G空间？](https://www.bilibili.com/opus/786612832275791943)

这篇博客非常清晰地解释了QQ占用空间过大的核心原因在于QQ的“被动缓存”机制，但可惜并未提供有效的清理方法，进而催生了本项目。

为了让用户在翻阅聊天记录时能“秒开”图片，QQ会将您在任何聊天窗口（包括您并未点开查看的群聊、被屏蔽的群聊）中“看到”的所有图片，都自动下载并缓存到您的本地硬盘上。这种设计，高情商的说法是“预加载以提升体验”，但实际上是将本应由云服务器承担的存储成本，转嫁到了每一个用户的本地硬盘上。

日积月累，这些您可能永远不会再次查看的表情包、梗图、无关截图就会无声无息地塞满您的硬盘。

更令人失望的是，QQ自带的清理功能往往收效甚微。它扫描出的可清理图片常常只有实际占用空间的冰山一角。用户缺少一个既安全、可控，又强大的清理工具。

本程序正是为了解决这一难题而生。 它提供了QQ官方所欠缺的精细化控制能力和操作透明度，让您能真正地掌控自己的硬盘空间，安全地移除那些“被动接收”的无用缓存。

在实施上，本项目克服了QQ Group2文件夹储存图片时采用两层映射导致的人工操作不便。如果不借助工具删除图片，很难做到筛选某个日期前的不重要图片进行删除，因为每张图片至少要点击两次文件夹才能看到缩略图。借助本项目工具，可以有效实现对图片按日期进行清理。

## 💻 如何使用

下载最新Release发行版并运行。

## 🚀 如何自行部署
### ① 安装依赖:
本程序依赖 Pillow 库来生成图片缩略图。请通过pip安装：

```
pip install Pillow
# 或者使用requestments.txt安装
pip install -r requestments.txt
```

### ② 运行程序:
直接运行 qq_group_images_cleaner.py 文件:

```
python qq_group_images_cleaner.py
```

### ③ 操作步骤:

1. 点击 "选择文件夹..." 按钮，定位到您的QQ个人文件夹（通常在 我的文档\Tencent Files\你的QQ号）。
2. 点击 "扫描文件"，程序会开始在后台分析文件夹，请耐心等待。
3. 扫描完成后，界面会按年/月展示图片所占用的空间和数量。
4. 在下方选择您希望清理的截止日期（例如，选择2024年12月，则会删除2024年12月及之前的所有图片）。
5. 点击 "删除文件"，在弹出的预览窗口中再次确认。
6. 确认后，程序将开始删除，并在完成后自动刷新列表。

## 📦 依赖
Python 3.7+

Pillow

## 🤝 贡献
欢迎提交问题 (Issues) 和拉取请求 (Pull Requests)。

1. Fork 本仓库

2. 创建您的新分支 (git checkout -b feature/AmazingFeature)

3. 提交您的更改 (git commit -m 'Add some AmazingFeature')

4. 推送到分支 (git push origin feature/AmazingFeature)

5. 打开一个 Pull Request